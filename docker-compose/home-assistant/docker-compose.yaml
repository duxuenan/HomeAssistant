version: '3.9'
services:
  homeassistant:
    container_name: home-assistant
    image: "homeassistant/home-assistant:stable"
    volumes:
      # æŒ‚è½½é…ç½®ç›®å½•ï¼ˆæ ¸å¿ƒæ•°æ®ï¼‰
      - ./config:/config
      # ä¸»æœºæ—¶é—´åŒæ­¥
      - /etc/localtime:/etc/localtime:ro
      # å¯é€‰ï¼šæŒ‚è½½ä¾èµ–å’Œå…±äº«ç›®å½•ï¼ˆä¾¿äºç®¡ç†ï¼‰
      - ./deps:/deps
      - ./share:/share
      # ğŸ”Œ å¦‚æœä½ æœ‰ Zigbee/Z-Wave USB æ£’ï¼Œå–æ¶ˆæ³¨é‡Šå¹¶ä¿®æ”¹è®¾å¤‡å
      # - /dev/ttyUSB0:/dev/ttyUSB0:rwm
      # - /dev/serial/by-id/usb-Silicon_Labs_slae.sh_cc2652rb_stick_e174e89f-if00-port0:/dev/ttyUSB0:rwm
    network_mode: host  # ä½¿ç”¨ä¸»æœºç½‘ç»œï¼Œç¡®ä¿è®¾å¤‡å‘ç°æ­£å¸¸
    restart: unless-stopped
    privileged: true  # æä¾›å¿…è¦æƒé™
    security_opt:
      - apparmor:unconfined
      - seccomp:unconfined  # å…è®¸è®¿é—®æ›´å¤šç³»ç»Ÿè°ƒç”¨
    environment:
      # å¯é€‰ï¼šè®¾ç½®æ—¶åŒºï¼ˆæ¨èä½¿ç”¨ localtime æŒ‚è½½ï¼Œæ­¤ä¸ºå¤‡ç”¨ï¼‰
      - TZ=Asia/Shanghai
    stdin_open: true
    tty: true