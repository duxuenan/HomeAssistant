# frigate-values.yaml
# é€‚ç”¨äº k8s-at-home/frigate Helm Chart
# ä¿®å¤ï¼šä½¿ç”¨ PVC æŒä¹…åŒ– /config å’Œ /tmp/cacheï¼Œè€Œé ConfigMap æˆ– EmptyDir

# å…³é”®ï¼šç¦ç”¨é»˜è®¤çš„ ConfigMapï¼Œå¦åˆ™ /config ä¸ä¼šä½¿ç”¨ PVC
config:
  enabled: false  # å¿…é¡»è®¾ä¸º falseï¼Œå¦åˆ™ Helm ä¼šä¼˜å…ˆæŒ‚è½½ ConfigMap åˆ° /config

# æŒä¹…åŒ–å­˜å‚¨é…ç½®
persistence:
  # æŒä¹…åŒ– /config ç›®å½•ï¼ˆå­˜æ”¾ config.ymlï¼‰
  config:
    enabled: true
    existingClaim: ""  # ç•™ç©ºåˆ™è‡ªåŠ¨åˆ›å»º PVC
    subPath: "config"  # åœ¨ PV ä¸­çš„å­è·¯å¾„
    accessMode: ReadWriteOnce
    size: 1Gi
    storageClass: local-path  # k3s é»˜è®¤ StorageClass

  # æŒä¹…åŒ– /tmp/cacheï¼ˆä¸´æ—¶ç¼“å­˜è§†é¢‘ç‰‡æ®µï¼‰
  cache:
    enabled: true
    existingClaim: ""
    subPath: "cache"
    accessMode: ReadWriteOnce
    size: 1Gi
    storageClass: local-path

  # æŒä¹…åŒ– /media/frigate/dbï¼ˆFrigate æ•°æ®åº“ï¼‰
  database:
    enabled: true
    existingClaim: ""
    subPath: "database"
    accessMode: ReadWriteOnce
    size: 2Gi
    storageClass: local-path

  # æŒä¹…åŒ– /media/frigate/recordingsï¼ˆ24/7 å½•åƒï¼‰
  media:
    enabled: false           # å¯ç”¨å‰è¯·ç¡®ä¿æœ‰å¤§å®¹é‡ç£ç›˜
    # existingClaim: frigate-media-pv-claim  # å¯æŒ‡å®šå·²æœ‰ PVC
    subPath: "media"
    accessMode: ReadWriteOnce
    size: 100Gi
    storageClass: local-path

# éƒ¨ç½²é…ç½®
deployment:
  replicas: 1
  strategy:
    type: Recreate  # æ¨èï¼šé¿å…å¤šå®ä¾‹ç«äº‰èµ„æº

# æœåŠ¡é…ç½®
service:
  main:
    ports:
      http:
        port: 5000
        targetPort: 5000
        protocol: TCP
    type: ClusterIP  # å¯æ”¹ä¸º NodePort æˆ– LoadBalancer

# ğŸ–¥ï¸ èµ„æºé™åˆ¶ï¼ˆæ ¹æ®ä½ çš„ç¡¬ä»¶è°ƒæ•´ï¼‰
resources: {}
#  ç¤ºä¾‹ï¼ˆå¯é€‰ï¼‰ï¼š
#  limits:
#    memory: 2Gi
#    cpu: "2"
#  requests:
#    memory: 1Gi
#    cpu: "1"

# ğŸ å®¹å™¨å®‰å…¨ä¸Šä¸‹æ–‡
podSecurityContext: {}
securityContext: {}

# # ğŸ“¦ é•œåƒé…ç½®ï¼ˆå¯é€‰ï¼šæŒ‡å®šç‰ˆæœ¬ï¼‰
# image:
#   repository: ghcr.io/blakeblackshear/frigate
#   pullPolicy: IfNotPresent
#   tag: 0.12.0-amd64  # å»ºè®®ä½¿ç”¨å…·ä½“ç‰ˆæœ¬ï¼Œé¿å… latest

# ğŸ” å…¶ä»–
livenessProbe:
  enabled: true
startupProbe:
  enabled: true